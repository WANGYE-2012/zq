2013-3-20
1.修改委托交易账号用户名的长度为200
alter table TRUSTTRADEACCOUNT modify name varchar2(200);
2.添加基金净值指标
insert into RISKINDICATOR values(6,'基金净值','');
3.委托交易账户表中添加密码字段
alter table TRUSTTRADEACCOUNT add password varchar2(32);

2013-4-2
1.添加基金净值参数表
CREATE TABLE "FUNDNETPARAM"  (
   "TRADEACCOUNTID"     INTEGER                         NOT NULL,
   "INNERVOLUMN"        DOUBLE PRECISION,
   "OUTERVOLUMN"        DOUBLE PRECISION,
   "OUTERNETASSET"      DOUBLE PRECISION,
   "INNERNETASSETOPTION" INTEGER,
   CONSTRAINT PK_FUNDNETPARAM PRIMARY KEY ("TRADEACCOUNTID")
);

ALTER TABLE "FUNDNETPARAM"
   ADD CONSTRAINT FK_FUNDNETP_REFERENCE_TRUSTTRA FOREIGN KEY ("TRADEACCOUNTID")
      REFERENCES "TRUSTTRADEACCOUNT" ("TRADEACCOUNTID");
2.添加基金净值计算结果表
CREATE TABLE "FUNDNETCALCRESULT"  (
   "TRADEACCOUNTID"     INTEGER                         NOT NULL,
   "INNERVOLUMN"        DOUBLE PRECISION,
   "OUTERVOLUMN"        DOUBLE PRECISION,
   "INNERNETASSET"      DOUBLE PRECISION,
   "OUTERNETASSET"      DOUBLE PRECISION,
   "INNERPERNET"        DOUBLE PRECISION,
   "OUTERPERNET"        DOUBLE PRECISION,
   "TOTALNETASSET"      DOUBLE PRECISION,
   "UPDATEDATE"         DATE
);

ALTER TABLE "FUNDNETCALCRESULT"
   ADD CONSTRAINT FK_FUNDNETC_REFERENCE_TRUSTTRA FOREIGN KEY ("TRADEACCOUNTID")
      REFERENCES "TRUSTTRADEACCOUNT" ("TRADEACCOUNTID");
3.添加强平参数表
CREATE TABLE "FORCECLOSEPARAM"  (
   "TRADEACCOUNTID"     INTEGER                         NOT NULL,
   "FORCECLOSEIND"      INTEGER,
   "THRESHOLD"          FLOAT,
   "CLOSESTRATEGY"      INTEGER,
   "FORCECLOSEPRICEOPTION" INTEGER,
   CONSTRAINT PK_FORCECLOSEPARAM PRIMARY KEY ("TRADEACCOUNTID")
);

ALTER TABLE "FORCECLOSEPARAM"
   ADD CONSTRAINT FK_FORCECLO_REFERENCE_TRUSTTRA FOREIGN KEY ("TRADEACCOUNTID")
      REFERENCES "TRUSTTRADEACCOUNT" ("TRADEACCOUNTID");
4.添加汇总数据表
CREATE TABLE "GATHERDATA"  (
   ID                   INTEGER,
   "IDTYPE"             INTEGER,
   "INITPROFIT"         DOUBLE PRECISION,
   "CURPROFIT"          DOUBLE PRECISION,
   "OFFSETPROFIT"       DOUBLE PRECISION,
   "ANNUALPROFITRATE"   DOUBLE PRECISION,
   "MARGINRATE"         DOUBLE PRECISION,
   "UPDATEDATE"         DATE,
   "RJVALUE"            DOUBLE PRECISION,
   "DAYCOUNT"           INTEGER
);

2013-4-10
修改委托交易账号相关表的外键约束关系为级联删除
ALTER TABLE "PRODUCTTHRESHOLD"
   DROP CONSTRAINT FK_PRODUCTT_REFERENCE_TRUSTTRA;
ALTER TABLE "PRODUCTTHRESHOLD"
   ADD CONSTRAINT FK_PRODUCTT_REFERENCE_TRUSTTRA FOREIGN KEY ("TRADEACCOUNTID")
      REFERENCES "TRUSTTRADEACCOUNT" ("TRADEACCOUNTID")
      ON DELETE CASCADE;

ALTER TABLE "FUNDNETPARAM"
   DROP CONSTRAINT FK_FUNDNETP_REFERENCE_TRUSTTRA;
ALTER TABLE "FUNDNETPARAM"
   ADD CONSTRAINT FK_FUNDNETP_REFERENCE_TRUSTTRA FOREIGN KEY ("TRADEACCOUNTID")
      REFERENCES "TRUSTTRADEACCOUNT" ("TRADEACCOUNTID")
      ON DELETE CASCADE;

ALTER TABLE "FUNDNETCALCRESULT"
   DROP CONSTRAINT FK_FUNDNETC_REFERENCE_TRUSTTRA;
ALTER TABLE "FUNDNETCALCRESULT"
   ADD CONSTRAINT FK_FUNDNETC_REFERENCE_TRUSTTRA FOREIGN KEY ("TRADEACCOUNTID")
      REFERENCES "TRUSTTRADEACCOUNT" ("TRADEACCOUNTID")
      ON DELETE CASCADE;

ALTER TABLE "FORCECLOSEPARAM"
   DROP CONSTRAINT FK_FORCECLO_REFERENCE_TRUSTTRA;
ALTER TABLE "FORCECLOSEPARAM"
   ADD CONSTRAINT FK_FORCECLO_REFERENCE_TRUSTTRA FOREIGN KEY ("TRADEACCOUNTID")
      REFERENCES "TRUSTTRADEACCOUNT" ("TRADEACCOUNTID")
      ON DELETE CASCADE;
